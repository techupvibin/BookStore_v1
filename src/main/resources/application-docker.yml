# üê≥ Docker-specific configuration
# This file is used when running in Docker containers

# üîå Spring DataSource Configuration for Docker
spring:
  datasource:
    url: jdbc:postgresql://postgres-db:5432/BookStore
    username: postgres
    password: ${DB_PASSWORD:Wrong123}
    driver-class-name: org.postgresql.Driver
  jpa:
    hibernate:
      ddl-auto: update  # Creates/updates tables automatically on startup
    show-sql: true
    properties:
      hibernate:
        dialect: org.hibernate.dialect.PostgreSQLDialect
        format_sql: true
  redis:
    host: redis_cache
    port: 6379
  kafka:
    bootstrap-servers: kafka:29092
    consumer:
      group-id: bookstore-app
      auto-offset-reset: latest
      key-deserializer: org.apache.kafka.common.serialization.StringDeserializer
      value-deserializer: org.apache.kafka.common.serialization.StringDeserializer
      properties:
        spring.json.trusted.packages: "*"
        session.timeout.ms: 30000
        heartbeat.interval.ms: 10000
        max.poll.interval.ms: 300000
        request.timeout.ms: 40000
    producer:
      acks: all
      key-serializer: org.apache.kafka.common.serialization.StringSerializer
      value-serializer: org.apache.kafka.common.serialization.StringSerializer
      properties:
        request.timeout.ms: 40000
        delivery.timeout.ms: 120000
    listener:
      ack-mode: batch
      missing-topics-fatal: false
      auto-startup: true
      startup-timeout: 60000
    enabled: true
  mail:
        # username: ${MAIL_USERNAME:api}
        # password: ${MAIL_PASSWORD:your-mail-password}
        # from: ${MAIL_FROM:hello@demomailtrap.co}
        username: api
        password: your-mail-password
        from: hello@demomailtrap.co
        properties:
          mail:
            smtp:
              auth: true
              starttls:
                enable: true
              ssl:
                trust: live.smtp.mailtrap.io

# üåê CORS Configuration for Docker
cors:
  allowed-origins: ["http://localhost:3000", "http://127.0.0.1:3000", "http://localhost:8080", "http://127.0.0.1:8080", "*"]
  allowed-methods: ["GET", "POST", "PUT", "DELETE", "PATCH", "OPTIONS", "HEAD"]
  allowed-headers: ["*"]
  allow-credentials: true

# üîê JWT Configuration
jwt:
  # secret: ${JWT_SECRET:dGhpcy1pcy1hLXN1cGVyLXNlY3JldC1rZXktdGhhdC1pcy1tb3JlLXRoYW4tMzItYnl0ZXMhISE=}
  secret: dGhpcy1pcy1hLXN1cGVyLXNlY3JldC1rZXktdGhhdC1pcy1tb3JlLXRoYW4tMzItYnl0ZXMhISE=
  expiration: 86400000

# üí≥ Stripe Configuration
stripe:
  secret:
    # key: ${STRIPE_SECRET_KEY:your-stripe-secret-key}
    key: your-stripe-secret-key
    # Stripe secret key (ensure this is a test key for development)
  publishable:
    # key: ${STRIPE_PUBLISHABLE_KEY:}
    key: your-stripe-publishable-key
    # Stripe publishable key (this is the key you can use on the frontend)

# üîë Google OAuth Configuration
google:
  oauth2:
    client:
      # id: ${GOOGLE_CLIENT_ID:}
      # secret: ${GOOGLE_CLIENT_SECRET:}
      id: your-google-client-id
      secret: your-google-client-secret

# ‚òÅÔ∏è AWS S3 Configuration
cloud:
  aws:
    credentials:
      # access-key: ${AWS_ACCESS_KEY_ID:your-aws-access-key} # AWS access key
      # secret-key: ${AWS_SECRET_ACCESS_KEY:your-aws-secret-key} # AWS secret key (üîê Sensitive: consider environment variables for production)
      access-key: your-aws-access-key
      secret-key: your-aws-secret-key
    region:
      # static: ${AWS_REGION:eu-north-1} # AWS region
      static: eu-north-1
    s3:
      # bucket-name: ${AWS_S3_BUCKET:} # S3 bucket name
      bucket-name: your-s3-bucket

# üìß Mail Configuration

# üìä Logging Configuration
logging:
  level:
    root: INFO
    org.springframework.security: DEBUG
    com.org.bookstore_backend: DEBUG

# üñºÔ∏è Local Images Configuration
app:
  local-images:
    directory: /app/images # Local directory in Docker container
    url-prefix: /api/images/local/ # URL prefix for serving local images
    enabled: true # Enable local image serving

# üö® Spring Boot Actuator Configuration
management:
  endpoints:
    web:
      exposure:
        include: "*"
  endpoint:
    health:
      show-details: always
